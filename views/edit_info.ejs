<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('components/head.ejs'); %>
</head>

<body id="page-top">
    <%- include('components/navbar.ejs'); %>
        <div class="container p-4">

            <h1 class="display-4 fw-bold mb-lg-4">Edit Employee Information</h1>

            <% if ( typeof error !=='undefined' ) { %>
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <strong>Error</strong>
                    <%= error %>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                <% } %>
                    <% if ( typeof success !=='undefined' ) { %>
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            <strong><%= success %></strong>
                            Go <a href="/employee/dashboard">Employee Home</a> 
                                <button type="button" class="btn-close" data-bs-dismiss="alert"
                                    aria-label="Close"></button>
                        </div>
                        <% } %>

                            <form action="/employee/edit-info" method="post">

                                <div class="mb-1 row g-1">
                                    <div class="input-group col-md">
                                        <label class="input-group-text" for="vender_id">Vender ID</label>
                                        <input type="text" class="form-control rounded-end text-break"
                                            placeholder="Vender ID" id="vender_id" name="vender_id"
                                            value="<%= employee.vender_id %>" disabled>
                                    </div>
                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start" for="employee_name">Employee
                                            Name</label>
                                        <input type="text" class="form-control text-break" pattern="^[a-zA-Z\s]+$"
                                            title="A name cannot contain numbers or special characters"
                                            placeholder="Employee Name" id="employee_name" name="employee_name" value="<%= employee.employee_name  %>" required>
                                    </div>
                                </div>

                                <div class="mb-1 row g-1">
                                    <div class="input-group col-md">
                                        <label class="input-group-text" for="father_name">Father Name</label>
                                        <input type="text" class="form-control rounded-end text-break"
                                            pattern="^[a-zA-Z\s]+$"
                                            title="A name cannot contain numbers or special characters"
                                            placeholder="Father Name" id="father_name" name="father_name" value="<%= employee.father_name  %>" required>
                                    </div>
                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start" for="phone_no">+91</label>
                                        <input type="text" class="form-control text-break" pattern="[\d]{10}"
                                            title="Phone number must be 10 digits long" placeholder="Phone Number"
                                            id="phone_no" name="phone_no" value="<%= employee.phone_no  %>" required>
                                    </div>
                                </div>

                                <div class="input-group mb-1">
                                    <input type="email" class="form-control" placeholder="Email ID" id="email"
                                        name="email" value="<%= employee.email  %>" required>
                                    <label class="input-group-text" for="email">@example.com</label>
                                </div>

                                <div class="mb-1 row g-1">
                                    <div class="input-group col-md">
                                        <label class="input-group-text" for="aadharcard_no">Aadhar Card No.</label>
                                        <input type="text" class="form-control rounded-end text-break"
                                            pattern="[\d]{12}" title="Aadhar card number must be 12 digits long"
                                            placeholder="Aadhar Card No." id="aadharcard_no" name="aadharcard_no" value="<%= employee.aadharcard_no  %>" required>
                                    </div>
                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start" for="pancard_no">PAN Card
                                            No.</label>
                                        <input type="text" class="form-control text-break" pattern="[\d]{10}"
                                            title="PAN card number must be 10 digits long" placeholder="PAN Card No."
                                            id="pancard_no" name="pancard_no" value="<%= employee.pancard_no  %>" required>
                                    </div>
                                </div>

                                <div class="mb-1 row g-1">
                                    <div class="input-group col-md">
                                        <label class="input-group-text" for="dob">DOB</label>
                                        <input type="date" class="form-control rounded-end text-break"
                                            placeholder="Date of Birth" id="dob" name="dob" value="<%= `${employee.dob.getFullYear()}-${('0' + (parseInt(employee.dob.getMonth()) + 1)).slice(-2)}-${('0' + employee.dob.getDate()).slice(-2)}` %>" required>
                                    </div>
                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start" for="doj">Date of Joining</label>
                                        <input type="date" class="form-control rounded-end text-break"
                                            placeholder="Date of Joining" id="doj" name="doj" value="<%= `${employee.doj.getFullYear()}-${('0' + (parseInt(employee.doj.getMonth()) + 1)).slice(-2)}-${('0' + employee.doj.getDate()).slice(-2)}` %>" required> 
                                    </div>

                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start" for="gender">Gender</label>
                                        <select class="form-select text-break" id="gender" name="gender" value="<%= employee.gender  %>" required>
                                            <option value="">Select Gender</option>
                                            <option value="Male" <% if (employee.gender == 'Male') { %> selected <%}%> >Male</option>
                                            <option value="Female" <% if (employee.gender == 'Female') { %> selected <%}%>>Female</option>
                                            <option value="Other" <% if (employee.gender == 'Other') { %> selected <%}%>>Other</option>
                                        </select>
                                    </div>

                                </div>

                                <div class="input-group mb-1">
                                    <label class="input-group-text" for="address">Address</label>
                                    <input type="text" class="form-control" placeholder="Address" id="address"
                                        name="address" value="<%= employee.address  %>" required>
                                </div>

                                <div class="mb-1 row g-1">
                                    <div class="input-group col-md">
                                        <label class="input-group-text" for="qualification">Qualification</label>
                                        <input type="text" class="form-control rounded-end text-break"
                                            placeholder="Qualification" id="qualification" name="qualification" value="<%= employee.qualification  %>" required>
                                    </div>
                                    <div class="input-group col-md">
                                        <label class="input-group-text rounded-start text-break"
                                            for="branch">Branch</label>
                                        <input type="text" class="form-control" placeholder="Branch" id="branch"
                                            name="branch" value="<%= employee.branch  %>" required>
                                    </div>
                                </div>

                                <div class="d-flex align-items-center justify-content-around">
                                    <button class="btn btn-lg btn-primary my-3" style="width: 47%;" type="submit">Save</button>
                                    <button class="btn btn-lg btn-secondary my-3" style="width: 47%;" type="button" onclick="window.location.replace(`/employee/dashboard`)">Go Back</button>
                                </div>
                            </form>
        </div>
        <%- include('components/footer.ejs'); %>
</body>

</html>